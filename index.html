<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <title>Editor</title>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
        <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase.js"></script>
        <!-- <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css"> -->
        <link rel="stylesheet" type="text/css" href="css/vis.css">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <!-- <script type="text/javascript" src="js/vis.js"></script> -->

        <link rel="stylesheet" type="text/css" href="css/net_editor.css">
    </head>

    <style type="text/css">
        #info-form {
            position: absolute;
            width: 20%;
            top: 35%;
            left: 40%;
        }
        .submit_page1 {
            margin-top: 20px;
            margin-bottom: 20px;
            margin-right: 20px;
        }
        #section-group .radio {
            margin-left: 5px;
        }
        .instr {
            margin: auto;
            width: 400px;
            margin-top: 10vh;
        }

        #add_friends {
            margin-top: 20px;
            margin-bottom: 20px;
            margin-right: 20px;
        }

    </style>

    <script type="text/javascript">

        <!-- page 1 scripts -->

        var instrText = [
            'Please enter the names of your closest friends. You can add as many friends as you like. On the next page, you will be asked to draw the connections between your friends. That is, you will use connections to show who is friends with who.',
            'On the next page, you will see the images of airports again. Your job is to reconstruct the flight network you\'ve learned about -- just draw a connection between any two airports that are connected by a direct flight.'
        ];
        var userId = null, sectionId = null;
        function signin() {
            $('#user-id').removeClass('is-invalid');
            userId = $('#user-id').val();
            sectionId = $("input[name='section']:checked").val();
            if (!userId.startsWith('ucla') || isNaN(userId.substring(4))) {  // error checking
                $('#user-id').addClass('is-invalid');
                return;
            }
            $('#instr-text').text(instrText[parseInt(userId.substring(4)) % 2]);
            $('#page1').hide();
            $('#page2').show();
        }

        <!-- page2 scripts -->

        friends = []

        var friend_count = 1;

        $(function() {
          $('#add_friends').click(function() {
              console.log("add")
              $('#friends_list').append("<div id='user-id-group' class='form-group'> <label id='user-id-text' class='control-label' for='user-id'>Friend " + (friend_count + 1) + "</label> <input id='user-id-input" + friend_count + "' type='text' class='form-control input-md' required> </div>");
              friend_count+=1;
              console.log(friend_count);

          });
        });

        function eval_input() {
            console.log("eval called")
            for (var q = 0; q < friend_count; q++) {
                var friend_input = $('#user-id-input' + q).val();
                console.log(friend_input)

                if (/[^a-zA-Z]/.test(friend_input)) {
                    console.log("bad input")
                    $('#user-id-input' + q).addClass('is-invalid');
                    break;
                }

                friends.push(friend_input);
            }

            console.log(friends)
            console.log(userId)
            console.log(sectionId)

            sessionStorage.setItem('friends', friends)
            sessionStorage.setItem('userId', userId)
            sessionStorage.setItem('sectionId', sectionId)
            window.location.href = 'editor.html';
        }

    </script>

    <body>

        <div id="page1"
            <div id="info1">
                <div id="info-form" class="survey" data-toggle="validator" role="form">
                    <form action="javascript:signin();" class="form-horizontal">
                        <div id="user-id-group" class="form-group">
                            <label id="user-id-text" class="control-label" for="user-id">ID</label>
                            <input id="user-id" type="text" class="form-control input-md" required>
                        </div>
                        <div id="section-group" class="form-group">
                            <label id="user-id-text" class="control-label">Section</label>
                            <div class="row">
                                <div class="radio col-auto">
                                    <input name="section" type="radio" value="1" required> 1
                                </div>
                                <div class="radio col">
                                    <input name="section" type="radio" value="2"> 2
                                </div>
                            </div>
                        </div>
                        <button id="submit-page1" type="submit" class="btn btn-primary submit_page1">Submit</button>
                    </form>
                </div>
            </div>
        </div>

        <div id="page2">
            <div id="instr1" class = "instr">
                <p id="instr-text"> Please enter the initials of up to 15 of your closest friends. Please make sure that every set of initials is unique. Please note that their names will be completely anonymized and will not be stored. Please only enter letters. </p>
            </div>

            <div id="info2">
                <div id="info-form" class="survey" data-toggle="validator" role="form">
                    <form action = "javascript:eval_input()" class="form-horizontal">
                        <div id="friends_input">
                            <div id="friends_list">
                                <div id="user-id-group" class="form-group">
                                    <label id="user-id-text" class="control-label" for="user-id">Friend 1</label>
                                    <input id="user-id-input0" type="text" class="form-control input-md" required>
                                </div>
                            </div>
                        </div>
                        <button id="add_friends" type="button" class="btn btn-success add-btn">Add friend</button>
                        <button id="submit-page2" type="submit" class="btn btn-primary submit_page2">Submit</button>
                    </form>
                </div>
            </div>
        </div>

        <div id="instr2" class="instr">
            <p id="instr-text"></p>
            <button id="start" class="btn btn-primary submit-btn">Start</button>
        </div>

    </body>

    <script>
        $('#instr2').hide()
        $('#page3').hide()
        $('#page2').hide()
    </script>




</html>
